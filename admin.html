<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - EasySubscribe</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Admin Dashboard Specific Styles */
    .admin-container {
      display: flex;
      min-height: 100vh;
      background-color: #f4f6f9;
    }
    
    .admin-sidebar {
      width: 280px;
      background: var(--dark);
      color: var(--white);
      display: flex;
      flex-direction: column;
      transition: var(--transition);
      position: fixed;
      height: 100vh;
      z-index: 1000;
    }
    
    .admin-sidebar-header {
      padding: 2rem 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .admin-logo {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 1.5rem;
    }
    
    .admin-logo i {
      font-size: 1.8rem;
      color: var(--primary);
    }
    
    .admin-logo h1 {
      font-size: 1.5rem;
      margin: 0;
    }
    
    .admin-user {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .admin-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
    }
    
    .admin-info p {
      margin: 0;
    }
    
    .admin-role {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
    }
    
    .admin-nav {
      flex: 1;
      padding: 1.5rem 0;
      overflow-y: auto;
    }
    
    .admin-nav ul {
      list-style: none;
      padding: 0;
    }
    
    .admin-nav li {
      margin-bottom: 0.5rem;
    }
    
    .admin-nav a {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.8rem 1.5rem;
      color: rgba(255, 255, 255, 0.7);
      transition: var(--transition);
      text-decoration: none;
    }
    
    .admin-nav a:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--white);
    }
    
    .admin-nav li.active a {
      background: rgba(30, 144, 255, 0.2);
      color: var(--white);
      border-left: 3px solid var(--primary);
    }
    
    .admin-nav i {
      width: 20px;
      text-align: center;
    }
    
    .admin-logout {
      padding: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .admin-logout a {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.8rem 1rem;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      color: var(--white);
      transition: var(--transition);
      text-decoration: none;
    }
    
    .admin-logout a:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .admin-main {
      flex: 1;
      margin-left: 280px;
      display: flex;
      flex-direction: column;
    }
    
    .admin-header {
      background: var(--white);
      padding: 1rem 2rem;
      box-shadow: var(--shadow);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .admin-header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .admin-menu-toggle {
      display: none;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      color: var(--dark);
      cursor: pointer;
    }
    
    .admin-header-right {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    
    .admin-search {
      position: relative;
      width: 250px;
    }
    
    .admin-search input {
      width: 100%;
      padding: 0.5rem 1rem 0.5rem 2.5rem;
      border: 1px solid var(--light-gray);
      border-radius: 20px;
      font-size: 0.9rem;
    }
    
    .admin-search i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }
    
    .admin-notification {
      position: relative;
      font-size: 1.2rem;
      color: var(--gray);
      cursor: pointer;
    }
    
    .admin-notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      background: var(--danger);
      color: var(--white);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .admin-content {
      padding: 2rem;
      flex: 1;
    }
    
    .security-alert {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      color: var(--white);
      padding: 1.5rem;
      border-radius: 10px;
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .security-alert i {
      font-size: 2rem;
    }
    
    .security-alert-content h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .admin-stat-card {
      background: var(--white);
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .admin-stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      color: var(--white);
    }
    
    .admin-stat-icon.users {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .admin-stat-icon.transactions {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .admin-stat-icon.volume {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    
    .admin-stat-icon.verification {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }
    
    .admin-stat-details h3 {
      font-size: 1.8rem;
      margin-bottom: 0.2rem;
    }
    
    .admin-stat-details p {
      color: var(--gray);
      margin: 0;
    }
    
    .admin-section {
      background: var(--white);
      border-radius: 10px;
      padding: 2rem;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
    }
    
    .admin-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .admin-section h2 {
      font-size: 1.5rem;
      margin: 0;
    }
    
    .admin-roles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    
    .admin-role-card {
      border: 1px solid var(--light-gray);
      border-radius: 10px;
      padding: 1.5rem;
      transition: var(--transition);
    }
    
    .admin-role-card:hover {
      box-shadow: var(--shadow);
      transform: translateY(-5px);
    }
    
    .admin-role-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .admin-role-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      color: var(--white);
    }
    
    .admin-role-icon.super {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .admin-role-icon.content {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .admin-role-icon.finance {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .admin-role-icon.support {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .admin-role-icon.technical {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    
    .admin-role-icon.marketing {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }
    
    .admin-role-icon.compliance {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }
    
    .admin-role-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0;
    }
    
    .admin-role-description {
      color: var(--gray);
      margin-bottom: 1rem;
    }
    
    .admin-role-responsibilities {
      list-style: none;
      padding: 0;
    }
    
    .admin-role-responsibilities li {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }
    
    .admin-role-responsibilities li i {
      color: var(--primary);
      margin-top: 0.2rem;
    }
    
    .admin-recent-activity {
      margin-top: 1rem;
    }
    
    .admin-activity-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border-bottom: 1px solid var(--light-gray);
    }
    
    .admin-activity-item:last-child {
      border-bottom: none;
    }
    
    .admin-activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1rem;
      color: var(--white);
    }
    
    .admin-activity-icon.login {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .admin-activity-icon.transaction {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .admin-activity-icon.user {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    
    .admin-activity-icon.settings {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }
    
    .admin-activity-details {
      flex: 1;
    }
    
    .admin-activity-details p {
      margin: 0;
    }
    
    .admin-activity-title {
      font-weight: 500;
    }
    
    .admin-activity-time {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    .admin-activity-action {
      font-size: 0.8rem;
      color: var(--primary);
      cursor: pointer;
    }
    
    /* Additional styles for loading state and error messages */
    .error-message {
      background-color: #ffebee;
      color: #d32f2f;
      padding: 12px 16px;
      border-radius: 4px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      border-left: 4px solid #d32f2f;
    }
    
    .error-message:before {
      content: '\f06a';
      font-family: 'Font Awesome 5 Free';
      font-weight: 900;
      margin-right: 10px;
    }
    
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    .skeleton-text {
      height: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 4px;
    }
    
    .skeleton-number {
      height: 2rem;
      width: 60%;
      border-radius: 4px;
      margin-bottom: 0.5rem;
    }
    
    .btn.loading {
      position: relative;
      color: transparent;
    }
    
    .btn.loading:after {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spinner 0.8s linear infinite;
    }
    
    @keyframes spinner {
      to { transform: rotate(360deg); }
    }
    
    @media (max-width: 992px) {
      .admin-sidebar {
        transform: translateX(-100%);
      }
      
      .admin-sidebar.active {
        transform: translateX(0);
      }
      
      .admin-main {
        margin-left: 0;
      }
      
      .admin-menu-toggle {
        display: block;
      }
      
      .admin-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 576px) {
      .admin-stats {
        grid-template-columns: 1fr;
      }
      
      .admin-roles {
        grid-template-columns: 1fr;
      }
      
      .admin-header-right {
        gap: 0.5rem;
      }
      
      .admin-search {
        width: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-sidebar-header">
        <div class="admin-logo">
          <i class="fas fa-bolt"></i>
          <h1>EasySubscribe</h1>
        </div>
        <div class="admin-user">
          <div class="admin-avatar">
            <i class="fas fa-user-shield"></i>
          </div>
          <div class="admin-info">
            <p class="admin-name" id="admin-name">Loading...</p>
            <p class="admin-role" id="admin-role">Loading...</p>
          </div>
        </div>
      </div>
      
      <nav class="admin-nav">
        <ul>
          <li class="active">
            <a href="admin.html">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="#" id="nav-users">
              <i class="fas fa-users"></i>
              <span>Users Details</span>
            </a>
          </li>
          <li>
            <a href="#" id="nav-transactions">
              <i class="fas fa-exchange-alt"></i>
              <span>View All Transaction</span>
            </a>
          </li>
          <li>
            <a href="#" id="nav-commissions">
              <i class="fas fa-percentage"></i>
              <span>Commission</span>
            </a>
          </li>
          <li>
            <a href="#" id="nav-notifications">
              <i class="fas fa-bell"></i>
              <span>Admin Notification</span>
            </a>
          </li>
        </ul>
      </nav>
      
      <div class="admin-logout">
        <a href="#" id="admin-logout-btn">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </a>
      </div>
    </aside>
    
    <!-- Admin Main Content -->
    <main class="admin-main">
      <!-- Admin Header -->
      <header class="admin-header">
        <div class="admin-header-left">
          <button class="admin-menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <h2>Admin Dashboard</h2>
        </div>
        
        <div class="admin-header-right">
          <div class="admin-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search...">
          </div>
          <div class="admin-notification">
            <i class="fas fa-bell"></i>
            <span class="admin-notification-badge" id="notification-count">0</span>
          </div>
        </div>
      </header>
      
      <!-- Admin Content -->
      <div class="admin-content">
        <!-- Error/Success Messages -->
        <div id="admin-error" class="error-message" style="display: none;"></div>
        
        <!-- Security Alert -->
        <div class="security-alert">
          <i class="fas fa-exclamation-triangle"></i>
          <div class="security-alert-content">
            <h3>Security Alert</h3>
            <p>All admin activities are logged and monitored. Unauthorized access will be reported.</p>
          </div>
        </div>
        
        <!-- Admin Stats -->
        <div class="admin-stats">
          <div class="admin-stat-card">
            <div class="admin-stat-icon users">
              <i class="fas fa-users"></i>
            </div>
            <div class="admin-stat-details">
              <h3 id="total-users">
                <span class="skeleton skeleton-number"></span>
              </h3>
              <p>Total Users</p>
            </div>
          </div>
          
          <div class="admin-stat-card">
            <div class="admin-stat-icon transactions">
              <i class="fas fa-exchange-alt"></i>
            </div>
            <div class="admin-stat-details">
              <h3 id="total-transactions">
                <span class="skeleton skeleton-number"></span>
              </h3>
              <p>Transactions</p>
            </div>
          </div>
          
          <div class="admin-stat-card">
            <div class="admin-stat-icon volume">
              <i class="fas fa-chart-line"></i>
            </div>
            <div class="admin-stat-details">
              <h3 id="total-volume">
                <span class="skeleton skeleton-number"></span>
              </h3>
              <p>Transaction Volume</p>
            </div>
          </div>
          
          <div class="admin-stat-card">
            <div class="admin-stat-icon verification">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="admin-stat-details">
              <h3 id="verification-rate">
                <span class="skeleton skeleton-number"></span>
              </h3>
              <p>Verification Rate</p>
            </div>
          </div>
        </div>
        
        <!-- Admin Roles Section -->
        <div class="admin-section">
          <div class="admin-section-header">
            <h2>Admin Roles & Responsibilities</h2>
            <button class="btn primary" id="add-admin-btn">
              <i class="fas fa-plus"></i> Add New Admin
            </button>
          </div>
          
          <div class="admin-roles">
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon super">
                  <i class="fas fa-user-cog"></i>
                </div>
                <h3 class="admin-role-title">Super Admin</h3>
              </div>
              <p class="admin-role-description">Has the highest authority on the platform with full control.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Manage all user accounts</li>
                <li><i class="fas fa-check"></i> Assign roles and permissions</li>
                <li><i class="fas fa-check"></i> Configure system-wide settings</li>
                <li><i class="fas fa-check"></i> Approve or deactivate services</li>
                <li><i class="fas fa-check"></i> Monitor transactions and analytics</li>
                <li><i class="fas fa-check"></i> Security management</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon content">
                  <i class="fas fa-edit"></i>
                </div>
                <h3 class="admin-role-title">Content Manager</h3>
              </div>
              <p class="admin-role-description">Focuses on website content and updates.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Create and edit service descriptions</li>
                <li><i class="fas fa-check"></i> Update blog/news sections</li>
                <li><i class="fas fa-check"></i> Manage images and promotional materials</li>
                <li><i class="fas fa-check"></i> Ensure content accuracy and SEO</li>
                <li><i class="fas fa-check"></i> Collaborate with marketing team</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon finance">
                  <i class="fas fa-coins"></i>
                </div>
                <h3 class="admin-role-title">Finance Manager</h3>
              </div>
              <p class="admin-role-description">Handles financial transactions and reconciliations.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Oversee wallet funding and payments</li>
                <li><i class="fas fa-check"></i> Generate financial reports</li>
                <li><i class="fas fa-check"></i> Manage refunds and disputes</li>
                <li><i class="fas fa-check"></i> Reconcile with payment gateways</li>
                <li><i class="fas fa-check"></i> Detect fraudulent activities</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon support">
                  <i class="fas fa-headset"></i>
                </div>
                <h3 class="admin-role-title">Support Admin</h3>
              </div>
              <p class="admin-role-description">Focuses on customer experience and issue resolution.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Respond to customer queries</li>
                <li><i class="fas fa-check"></i> Troubleshoot transaction errors</li>
                <li><i class="fas fa-check"></i> Escalate technical issues</li>
                <li><i class="fas fa-check"></i> Maintain FAQs and support guides</li>
                <li><i class="fas fa-check"></i> Track and resolve complaints</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon technical">
                  <i class="fas fa-server"></i>
                </div>
                <h3 class="admin-role-title">Technical Admin</h3>
              </div>
              <p class="admin-role-description">Ensures smooth technical operations.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Manage server hosting and uptime</li>
                <li><i class="fas fa-check"></i> Apply security patches and updates</li>
                <li><i class="fas fa-check"></i> Ensure API integrations run smoothly</li>
                <li><i class="fas fa-check"></i> Monitor logs and fix errors</li>
                <li><i class="fas fa-check"></i> Handle backups and disaster recovery</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon marketing">
                  <i class="fas fa-bullhorn"></i>
                </div>
                <h3 class="admin-role-title">Marketing Admin</h3>
              </div>
              <p class="admin-role-description">Drives user growth and engagement.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Run digital marketing campaigns</li>
                <li><i class="fas fa-check"></i> Manage referral and loyalty programs</li>
                <li><i class="fas fa-check"></i> Track analytics and metrics</li>
                <li><i class="fas fa-check"></i> Promote discounts and offers</li>
                <li><i class="fas fa-check"></i> Coordinate with content team</li>
              </ul>
            </div>
            
            <div class="admin-role-card">
              <div class="admin-role-header">
                <div class="admin-role-icon compliance">
                  <i class="fas fa-balance-scale"></i>
                </div>
                <h3 class="admin-role-title">Compliance Admin</h3>
              </div>
              <p class="admin-role-description">Ensures legal and regulatory compliance.</p>
              <ul class="admin-role-responsibilities">
                <li><i class="fas fa-check"></i> Verify regulatory compliance</li>
                <li><i class="fas fa-check"></i> Monitor KYC processes</li>
                <li><i class="fas fa-check"></i> Audit system logs and reports</li>
                <li><i class="fas fa-check"></i> Prevent illegal transactions</li>
                <li><i class="fas fa-check"></i> Maintain data privacy compliance</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Recent Activity Section -->
        <div class="admin-section">
          <div class="admin-section-header">
            <h2>Recent Admin Activity</h2>
            <a href="#" class="view-all">View All</a>
          </div>
          
          <div class="admin-recent-activity">
            <div class="admin-activity-item">
              <div class="admin-activity-icon login">
                <i class="fas fa-sign-in-alt"></i>
              </div>
              <div class="admin-activity-details">
                <p class="admin-activity-title">Admin login: <span id="recent-admin-name">Loading...</span> (<span id="recent-admin-role">Loading...</span>)</p>
                <p class="admin-activity-time" id="recent-login-time">Loading...</p>
              </div>
              <div class="admin-activity-action">View Details</div>
            </div>
            
            <div class="admin-activity-item">
              <div class="admin-activity-icon transaction">
                <i class="fas fa-exchange-alt"></i>
              </div>
              <div class="admin-activity-details">
                <p class="admin-activity-title">Transaction verification: <span id="recent-transaction-ref">Loading...</span></p>
                <p class="admin-activity-time" id="recent-transaction-time">Loading...</p>
              </div>
              <div class="admin-activity-action">View Details</div>
            </div>
            
            <div class="admin-activity-item">
              <div class="admin-activity-icon user">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="admin-activity-details">
                <p class="admin-activity-title">New user registration: <span id="recent-user-name">Loading...</span></p>
                <p class="admin-activity-time" id="recent-user-time">Loading...</p>
              </div>
              <div class="admin-activity-action">View Details</div>
            </div>
            
            <div class="admin-activity-item">
              <div class="admin-activity-icon settings">
                <i class="fas fa-cogs"></i>
              </div>
              <div class="admin-activity-details">
                <p class="admin-activity-title">System settings updated by: <span id="recent-settings-admin">Loading...</span></p>
                <p class="admin-activity-time" id="recent-settings-time">Loading...</p>
              </div>
              <div class="admin-activity-action">View Details</div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Reference the main.js file -->
  <script src="main.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is admin
      checkAdminAccess();
      
      // Load admin data
      loadAdminData();
      
      // Load admin stats
      loadAdminStats();
      
      // Load recent activities
      loadRecentActivities();
      
      // Mobile menu toggle
      document.querySelector('.admin-menu-toggle').addEventListener('click', function() {
        document.querySelector('.admin-sidebar').classList.toggle('active');
      });
      
      // Logout button
      document.getElementById('admin-logout-btn').addEventListener('click', function(e) {
        e.preventDefault();
        logout();
      });
      
      // Add admin button
      document.getElementById('add-admin-btn').addEventListener('click', function() {
        alert('Add New Admin functionality would be implemented here');
      });
      
      // Navigation links
      document.getElementById('nav-users').addEventListener('click', function(e) {
        e.preventDefault();
        alert('Users Details page would be implemented here');
      });
      
      document.getElementById('nav-transactions').addEventListener('click', function(e) {
        e.preventDefault();
        alert('All Transactions page would be implemented here');
      });
      
      document.getElementById('nav-commissions').addEventListener('click', function(e) {
        e.preventDefault();
        alert('Commissions page would be implemented here');
      });
      
      document.getElementById('nav-notifications').addEventListener('click', function(e) {
        e.preventDefault();
        alert('Admin Notifications page would be implemented here');
      });
      
      // View all buttons
      document.querySelectorAll('.view-all').forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          alert('View All functionality would be implemented here');
        });
      });
      
      // View details buttons in activity log
      document.querySelectorAll('.admin-activity-action').forEach(button => {
        button.addEventListener('click', function() {
          alert('Activity details would be displayed here');
        });
      });
    });
    
    // Check if user is admin
    function checkAdminAccess() {
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      
      if (user.role !== 'admin' && user.role !== 'super-admin') {
        window.location.href = 'dashboard.html';
      }
    }
    
    // Load admin data
    function loadAdminData() {
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      
      if (user.name) {
        document.getElementById('admin-name').textContent = user.name;
      }
      
      if (user.role) {
        document.getElementById('admin-role').textContent = user.role === 'super-admin' ? 'Super Admin' : 'Admin';
      }
    }
    
    // Load admin stats
    function loadAdminStats() {
      const token = localStorage.getItem('token');
      
      if (!token) return;
      
      // Show loading state
      document.getElementById('total-users').innerHTML = '<span class="skeleton skeleton-number"></span>';
      document.getElementById('total-transactions').innerHTML = '<span class="skeleton skeleton-number"></span>';
      document.getElementById('total-volume').innerHTML = '<span class="skeleton skeleton-number"></span>';
      document.getElementById('verification-rate').innerHTML = '<span class="skeleton skeleton-number"></span>';
      
      fetch(`${API_BASE}/api/admin/stats`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch admin stats');
        }
        return response.json();
      })
      .then(data => {
        document.getElementById('total-users').textContent = data.totalUsers.toLocaleString();
        document.getElementById('total-transactions').textContent = data.totalTransactions.toLocaleString();
        document.getElementById('total-volume').textContent = `₦${data.totalVolume.toLocaleString()}`;
        document.getElementById('verification-rate').textContent = `${data.verificationRate}%`;
      })
      .catch(error => {
        console.error('Error loading admin stats:', error);
        document.getElementById('total-users').textContent = '0';
        document.getElementById('total-transactions').textContent = '0';
        document.getElementById('total-volume').textContent = '₦0';
        document.getElementById('verification-rate').textContent = '0%';
      });
    }
    
    // Load recent activities
    function loadRecentActivities() {
      const token = localStorage.getItem('token');
      
      if (!token) return;
      
      // Get current user
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      
      // Update recent admin login
      if (user.name) {
        document.getElementById('recent-admin-name').textContent = user.name;
        document.getElementById('recent-admin-role').textContent = user.role === 'super-admin' ? 'Super Admin' : 'Admin';
        document.getElementById('recent-login-time').textContent = 'Just now';
      }
      
      // Get recent transactions
      fetch(`${API_BASE}/api/admin/transactions?limit=1`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch recent transactions');
        }
        return response.json();
      })
      .then(data => {
        if (data.transactions && data.transactions.length > 0) {
          const transaction = data.transactions[0];
          document.getElementById('recent-transaction-ref').textContent = transaction.reference;
          
          const date = new Date(transaction.createdAt);
          document.getElementById('recent-transaction-time').textContent = date.toLocaleDateString('en-NG', {
            day: 'numeric',
            month: 'short',
            hour: '2-digit',
            minute: '2-digit'
          });
        }
      })
      .catch(error => {
        console.error('Error loading recent transactions:', error);
      });
      
      // Get recent users
      fetch(`${API_BASE}/api/admin/users?limit=1&sort=newest`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch recent users');
        }
        return response.json();
      })
      .then(data => {
        if (data.users && data.users.length > 0) {
          const user = data.users[0];
          document.getElementById('recent-user-name').textContent = user.name;
          
          const date = new Date(user.createdAt);
          document.getElementById('recent-user-time').textContent = date.toLocaleDateString('en-NG', {
            day: 'numeric',
            month: 'short',
            hour: '2-digit',
            minute: '2-digit'
          });
        }
      })
      .catch(error => {
        console.error('Error loading recent users:', error);
      });
      
      // Placeholder for settings update
      document.getElementById('recent-settings-admin').textContent = 'System Admin';
      document.getElementById('recent-settings-time').textContent = 'Yesterday, 04:30 PM';
    }
  </script>
</body>
</html>